!function(){"use strict";const e=require("@revenge-mod/metro"),t=require("@revenge-mod/patcher"),n=require("@revenge-mod/api"),o=e.findByProps("sendMessage"),s=e.findByProps("getCurrentUser"),r=e.findByProps("getChannel"),a=e.findByProps("getChannelId"),i=new Set,c=new Map;n.commands.register({name:"annoy",description:"Start/stop echoing a user for this session",options:[{name:"user",description:"Who to echo",type:6,required:!0}],execute:(e,t)=>{const n=e[0].value;return i.has(n)?(i.delete(n),{content:`Stopped echoing <@${n}>.`,ephemeral:!0}):(i.add(n),{content:`Now echoing <@${n}> in this channel.`,ephemeral:!0})}});const p=t.after("dispatch",e.findByProps("dispatch"),([,e])=>{if("MESSAGE_CREATE"!==e.type)return;const t=e.message,n=s.getCurrentUser(),d=r.getChannel(t.channel_id);if(t.author.id===n.id||t.author.bot||!d||0!==d.type||!i.has(t.author.id))return;if(c.has(t.id))return;const u={content:t.content,embeds:t.embeds,sticker_items:t.sticker_items,allowed_mentions:{parse:[]},message_reference:{message_id:t.id,channel_id:t.channel_id}};o.sendMessage(t.channel_id,u).then(e=>c.set(t.id,e.id))});module.exports.onUnload=()=>{n.commands.unregister("annoy"),p(),i.clear(),c.clear()}}();
